apiVersion: v1
kind: Namespace
metadata:
  name: longhorn-system
  labels:
    name: longhorn-system
---
apiVersion: v1
kind: Namespace
metadata:
  name: gitea
  labels:
    name: gitea
---
apiVersion: v1
kind: Secret
metadata:
  name: gitea-admin-secret
  namespace: gitea
type: Opaque
stringData:
  username: gitea_admin
  password: {{ .Values.gitea.password }}
---
apiVersion: v1
kind: Secret
metadata:
  name: longhorn-backblaze-credentials
  namespace: longhorn-system
type: Opaque
stringData:
  AWS_ENDPOINTS: {{ .Values.backblaze.AWS_ENDPOINTS }}
  AWS_ACCESS_KEY_ID: {{ .Values.backblaze.AWS_ACCESS_KEY_ID }}
  AWS_SECRET_ACCESS_KEY: {{ .Values.backblaze.AWS_SECRET_ACCESS_KEY }}
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: dr-apps
  namespace: argocd
spec:
  destination:
    namespace: argocd
    server: https://kubernetes.default.svc
  project: default
  source:
    path: dr-apps
    repoURL: https://github.com/electricallen/homelab-gitops-disaster-recovery.git
    targetRevision: HEAD